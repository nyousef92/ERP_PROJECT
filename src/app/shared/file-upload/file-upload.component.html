<div class="w-full">

  @if (label) {
    <label class="block text-xs text-gray-700 mb-1.5 capitalize">{{ label }}</label>
  }

  <p class="text-xs text-text-muted mb-2">
    Max {{ maxFiles }} files: {{ acceptedTypes.join(', ') }} accepted
  </p>

  <div
    class="border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer"
    [class.border-primary]="isDragOver"
    [class.bg-primary/5]="isDragOver"
    [class.border-border]="!isDragOver"
    (click)="fileInput.click()"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)">

    <span class="material-icons text-4xl text-text-muted mb-2 block">cloud_upload</span>
    <p class="text-sm text-text mb-1">Click to upload or drag and drop</p>
    <p class="text-xs text-text-muted">{{ acceptedTypes.join(', ') }} (MAX {{ maxSizeMB }} MB)</p>

    <input #fileInput type="file" [accept]="accept" [multiple]="maxFiles > 1"
      class="hidden" (change)="onFileSelect($event)" />
  </div>

  @if (errorMessage) {
    <p class="mt-1.5 text-xs text-danger flex items-center gap-1">
      <span class="material-icons text-sm">error_outline</span>
      {{ errorMessage }}
    </p>
  }

  @if (files.length > 0) {
    <ul class="mt-3 space-y-2">
      @for (file of files; track file.name; let i = $index) {
        <li class="flex items-center gap-3 px-3 py-2 bg-background border border-border rounded-lg">
          <span class="material-icons text-xl text-primary">{{ getFileIcon(file) }}</span>
          <span class="flex-1 truncate text-text text-xs">{{ file.name }}</span>
          <span class="shrink-0 text-text-muted text-xs">{{ formatSize(file.size) }}</span>
          <button type="button" (click)="removeFile(i)"
            class="shrink-0 text-text-muted hover:text-danger transition-colors">
            <span class="material-icons text-base">close</span>
          </button>
        </li>
      }
    </ul>
  }

</div>
